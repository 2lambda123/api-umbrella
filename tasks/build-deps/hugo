#!/usr/bin/env bash

set -e -u -x
source ./tasks/helpers.sh

hugo_version="0.101.0"
hugo_hash="551e8b48923b8aa09ba672f93f51cb77597be543e274a2d6401ba28f8a86a7a2"

download_arch="$TARGETARCH"
if [ "$TARGETARCH" == "amd64" ]; then
  download_arch="x86_64"
elif [ "$TARGETARCH" == "arm64" ]; then
  download_arch="aarch64"
  hugo_hash="910ac0dc6f030ce2777f77531e2b371770d87d9eac62ccd0e9fb0394ceab367c"
fi

task_working_dir
download "https://github.com/hugoguru/dist-hugo/releases/download/v${hugo_version}/hugo-extended-${hugo_version}-linux-${download_arch}.tar.gz" "sha256" "$hugo_hash"
extract_download "hugo-extended-${hugo_version}-linux-${download_arch}.tar.gz"

install -D -m 755 "hugo" "$DEV_INSTALL_PREFIX/bin/hugo"

stamp
