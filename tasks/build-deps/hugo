#!/usr/bin/env bash

set -e -u -x
source ./tasks/helpers.sh

hugo_version="0.98.0"
hugo_hash="85049e7277df653381603ab926ef498a99efcc6bf61e44b1bc646a101178dacb"

download_arch="$TARGETARCH"
if [ "$TARGETARCH" == "amd64" ]; then
  download_arch="x86_64"
elif [ "$TARGETARCH" == "arm64" ]; then
  download_arch="aarch64"
  hugo_hash="406616f1ae7e1112221d0ab07160966512a1152b7c78a0867d106a54ad71fff9"
fi

task_working_dir
download "https://github.com/hugoguru/dist-hugo/releases/download/v${hugo_version}/hugo-extended-${hugo_version}-linux-${download_arch}.tar.gz" "sha256" "$hugo_hash"
extract_download "hugo-extended-${hugo_version}-linux-${download_arch}.tar.gz"

install -D -m 755 "hugo" "$DEV_INSTALL_PREFIX/bin/hugo"

stamp
