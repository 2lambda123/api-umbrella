#!/usr/bin/env bash

set -e -u -x
source ./tasks/helpers.sh

hugo_version="0.117.0"
hugo_hash="5d136420680ce3ccd6b1f1824332f8e2c97a802890e7b25d14f7e5f343f724a9"

download_arch="$TARGETARCH"
if [ "$TARGETARCH" == "amd64" ]; then
  download_arch="64bit"
elif [ "$TARGETARCH" == "arm64" ]; then
  download_arch="arm64"
  hugo_hash="64f47587cfada4e5d0467199bca8841c91bc820e68604393f5abe04e8c90f0f5"
fi

task_working_dir
download "https://github.com/gohugoio/hugo/releases/download/v${hugo_version}/hugo_extended_${hugo_version}_Linux-${download_arch}.tar.gz" "sha256" "$hugo_hash"
extract_download "hugo_extended_${hugo_version}_Linux-${download_arch}.tar.gz"

install -D -m 755 "hugo" "$DEV_INSTALL_PREFIX/bin/hugo"

stamp
