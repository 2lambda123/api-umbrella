app_env: test
user:
group:
http_port: 9080
https_port: 9081
etc_dir: /tmp/api-umbrella-test/etc
log_dir: /tmp/api-umbrella-test/var/log
run_dir: /tmp/api-umbrella-test/var/run
tmp_dir: /tmp/api-umbrella-test/var/tmp
db_dir: /tmp/api-umbrella-test/var/db
static_site:
  build_dir: /tmp/api-umbrella-test/static_site_build
redis:
  host: 127.0.0.1
  port: 13000
gatekeeper:
  starting_port: 13050
varnish:
  port: 13010
  backend:
    port: 13011
web:
  port: 13012
mongodb:
  url: "mongodb://127.0.0.1:13001/api_umbrella_test"
  embedded_server_config:
    net:
      port: 13001
elasticsearch:
  hosts:
    - "http://127.0.0.1:13002"
  embedded_server_config:
    http:
      port: 13002
    transport:
      tcp:
        port: 13003
apis:
  - _id: down
    frontend_host: localhost
    backend_host: localhost
    servers:
      - host: 127.0.0.1
        port: 9450
    url_matches:
      - frontend_prefix: /down
        backend_prefix: /down
  - _id: keepalive
    frontend_host: localhost
    backend_host: localhost
    servers:
      - host: 127.0.0.1
        port: 9445
    url_matches:
      - frontend_prefix: /keepalive9445/
        backend_prefix: /keepalive9445/
    rate_limit_mode: unlimited
  - _id: keepalive2
    frontend_host: localhost
    backend_host: localhost
    servers:
      - host: 127.0.0.1
        port: 9446
    url_matches:
      - frontend_prefix: /keepalive9446/
        backend_prefix: /keepalive9446/
    rate_limit_mode: unlimited
    keepalive_connections: 3
  - _id: keepalive3
    frontend_host: localhost
    backend_host: localhost
    servers:
      - host: 127.0.0.1
        port: 9447
    url_matches:
      - frontend_prefix: /keepalive9447/
        backend_prefix: /keepalive9447/
    rate_limit_mode: unlimited
  - _id: example
    frontend_host: localhost
    backend_host: localhost
    servers:
      - host: 127.0.0.1
        port: 9444
    url_matches:
      - frontend_prefix: /
        backend_prefix: /
  - _id: config-reloader-example-api
    servers:
      - host: example.com
        port: 80
  - _id: config-reloader-example-ip-api
    servers:
      - host: 8.8.8.8
        port: 80
  - _id: config-reloader-invalid-api
    servers:
      - host: foo.blah
        port: 80
  - _id: config-reloader-once-valid-api
    servers:
      - host: once-valid.blah
        port: 80
  - _id: config-reloader-once-valid-use-recent-api
    servers:
      - host: once-valid.akamai.com
        port: 80
  - _id: config-reloader-cached-api
    servers:
      - host: google.com
        port: 80
  - _id: config-reloader-localhost-api
    servers:
      - host: localhost
        port: 80
  - _id: config-reloader-dont-cache-recent-api
    servers:
      - host: api.data.gov
        port: 80
  - _id: config-reloader-use-recent-cname-api
    servers:
      - host: www.akamai.com
        port: 80
  - _id: config-reloader-use-recent-domain-api
    servers:
      - host: yahoo.com
        port: 80
  - _id: config-reloader-use-recent-expired-api
    servers:
      - host: blogs.akamai.com
        port: 80
  - _id: config-reloader-use-uncached-incrementing-api
    servers:
      - host: uncached-incrementing.blah
        port: 80
  - _id: config-reloader-use-uncached-alternating-api
    servers:
      - host: uncached-alternating.blah
        port: 80
dns_resolver:
  minimum_ttl: 0.1
  ignore_ttl_domains:
    - "akamaiedge\\.net$"
    - "yahoo\\.com"

# This is the config for redis-convoy. We're using their defaults, but the
# defaults go away when in their test environment. So redefine them here.
convoy:
  keys:
    prefix: "cv:"
    logTTL: 86400,
		queued: queued
		processing: processing
		failed: failed
