<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Backend HTTP Headers - Documentation - API Umbrella</title>
    <link href="../../stylesheets/all-30ecdeba.css" rel="stylesheet" type="text/css" />
    <script src="../../javascripts/all-08595316.js" type="text/javascript"></script>
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Raleway:400,300,700" rel="stylesheet" type="text/css">

    <link rel="canonical" href="http://apiumbrella.io/docs/backend-headers/" />
    <script>
      if(window.location.href.indexOf('nrel.github.io') !== -1) {
        window.location.href = 'http://apiumbrella.io/docs/backend-headers/';
      }
    </script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-42866857-2', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
  <body class="docs docs_backend-headers docs_backend-headers_index">
    <div id="navigation" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#"><i class="fa fa-umbrella"></i> <b>API Umbrella</b></a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class=""><a href="../../">Home</a></li>
            <li class=""><a href="../../download/">Download</a></li>
            <li class="active"><a href="../install/">Documentation</a></li>
          </ul>
        </div>
      </div>
    </div>

      <header>
        <div class="container">
          <h1>Documentation</h1>
        </div>
      </header>

      <div class="container">
    <div class="row">
      <nav class="col-md-3">
        <div class="nav-section">User Guide</div>
<ul>
   <li class="">
    <a href="../api-keys/">API Keys</a>
  </li>
</ul>

<hr>

<div class="nav-section">Administrator Guide</div>
<ul>
  <li class="">
    <a href="../install/">Installation</a>
  </li>
  <li class="">
    <a href="../getting-started/">Getting Started</a>
  </li>
  <li class="">
    <a href="../architecture/">Architecture</a>
  </li>
  <li class="">
    <a href="../admin-api/">Administrative REST API</a>
  </li>
  <li class="active">
    <a href="./">Backend HTTP Headers</a>
  </li>
  <li class="">
    <a href="../caching/">Caching</a>
  </li>
  <li class="">
    <a href="../smtp-configuration/">SMTP Configuration</a>
  </li>
</ul>

<hr>

<div class="nav-section">Developer Guide</div>
<ul>
  <li class="">
    <a href="../development-setup/">Development Setup</a>
  </li>
  <li class="">
    <a href="../deployment/">Deploying From Git</a>
  </li>
</ul>

      </nav>
      <div class="col-md-9">
        <h2 id="backend-http-headers">Backend HTTP Headers</h2>

<p>After API Umbrella verifies an incoming request (a valid API key, below rate limits, etc), it will then proxy the incoming request to your API backend. The request your API backend receives will have additional HTTP headers added to the request. These headers can optionally be used to identify details about the requesting user.</p>

<h3 id="x-api-user-id">X-Api-User-Id</h3>

<p>A unique identifier for the requesting user (UUID format). This should be used if your API backend needs to uniquely identify the user making the request.</p>

<pre class="highlight plaintext"><code>X-Api-User-Id: (UUID)
</code></pre>

<p>Example:</p>

<pre class="highlight plaintext"><code>X-Api-User-Id: d44a13a0-926a-11e3-baa8-0800200c9a66
</code></pre>

<h3 id="x-api-roles">X-Api-Roles</h3>

<p>If the user accessing the API has roles assigned to them, these will be present in the <code>X-Api-Roles</code> header as a comma-separated list of roles:</p>

<pre class="highlight plaintext"><code>X-Api-Roles: (comma separated list)
</code></pre>

<p>Example:</p>

<pre class="highlight plaintext"><code>X-Api-Roles: write_permissions,private_access
</code></pre>

<h3 id="x-forwarded-for">X-Forwarded-For</h3>

<p>Used for identifying the original IP address of the client. See <a href="https://en.wikipedia.org/wiki/X-Forwarded-For">X-Forwarded-For</a> for usage and details.</p>

<pre class="highlight plaintext"><code>X-Forwarded-For: (comma separated list)
</code></pre>

<p>Example:</p>

<pre class="highlight plaintext"><code>X-Forwarded-For: 203.0.113.54, 198.51.100.18
</code></pre>

<h3 id="x-forwarded-proto">X-Forwarded-Proto</h3>

<p>The original protocol of the client's request (either <code>http</code> or <code>https</code>). This can be used to determine how the client originally connected to the API regardless of what protocol is being used for API backend communication.</p>

<pre class="highlight plaintext"><code>X-Forwarded-Proto: (http or https)
</code></pre>

<p>Example:</p>

<pre class="highlight plaintext"><code>X-Forwarded-Proto: https
</code></pre>

<h3 id="x-forwarded-port">X-Forwarded-Port</h3>

<p>The original port of the client's request (for example, <code>80</code> or <code>443</code>). This can be used to determine how the client originally connected to the API regardless of what port is being used for API backend communication.</p>

<pre class="highlight plaintext"><code>X-Forwarded-Port: (number)
</code></pre>

<p>Example:</p>

<pre class="highlight plaintext"><code>X-Forwarded-Port: 443
</code></pre>

<h3 id="x-api-umbrella-request-id">X-Api-Umbrella-Request-Id</h3>

<p>A unique string identifier for each individual request. This can be used in log data to trace a specific request through multiple servers or proxy layers.</p>

<pre class="highlight plaintext"><code>X-Api-Umbrella-Request-Id: (unique string identifier)
</code></pre>

<p>Example:</p>

<pre class="highlight plaintext"><code>X-Api-Umbrella-Request-Id: aelqdj9lfoe7c2itheg0
</code></pre>

<h3 id="x-api-key-deprecated">X-Api-Key (Deprecated)</h3>

<p>Currently the API passed in by the user is passed along to API backends in the <code>X-Api-Key</code> header. However, this header is deprecated and will be removed in the future. Instead, the <code>X-Api-User-Id</code> should be used if you need to uniquely identify the requesting user.</p>

<pre class="highlight plaintext"><code>X-Api-Key: (api key)
</code></pre>

<p>Example:</p>

<pre class="highlight plaintext"><code>X-Api-Key: 5WH3bgykjP9ihtrRl5ib9nQY5NzUGOixdXjBnx18
</code></pre>

      </div>
    </div>
  </div>


    <div style="text-align: center; font-style: italic; padding: 2em 0.5em;">
      <a href="https://github.com/NREL/api-umbrella/blob/master/website/docs/backend-headers.md">Help Improve this Content</a>
    </div>
  </body>
</html>
