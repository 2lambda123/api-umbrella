<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Getting Started - Documentation - API Umbrella</title>
    <link href="../../stylesheets/all-c32fdaa4.css" rel="stylesheet" type="text/css" />
    <script src="../../javascripts/all-992d4073.js" type="text/javascript"></script>
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Raleway:400,300,700" rel="stylesheet" type="text/css">

    <link rel="canonical" href="http://apiumbrella.io/docs/getting-started/" />
    <script>
      if(window.location.href.indexOf('nrel.github.io') !== -1) {
        window.location.href = 'http://apiumbrella.io/docs/getting-started/';
      }
    </script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-42866857-2', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
  <body class="docs docs_getting-started docs_getting-started_index">
    <div id="navigation" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#"><i class="fa fa-umbrella"></i> <b>API Umbrella</b></a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class=""><a href="../../">Home</a></li>
            <li class=""><a href="../../download/">Download</a></li>
            <li class="active"><a href="../architecture/">Documentation</a></li>
          </ul>
        </div>
      </div>
    </div>

      <header>
        <div class="container">
          <h1>Documentation</h1>
        </div>
      </header>

      <div class="container">
    <div class="row">
      <nav class="col-md-3">
        <div class="nav-section">User Guide</div>
<ul>
   <li class="">
    <a href="../api-keys/">API Keys</a>
  </li>
</ul>

<hr>

<div class="nav-section">Administrator Guide</div>
<ul>
  <li class="active">
    <a href="./">Getting Started</a>
  </li>
  <li class="">
    <a href="../architecture/">Architecture</a>
  </li>
  <li class="">
    <a href="../admin-api/">Administrative REST API</a>
  </li>
  <li class="">
    <a href="../backend-headers/">Backend HTTP Headers</a>
  </li>
  <li class="">
    <a href="../caching/">Caching</a>
  </li>
  <li class="">
    <a href="../smtp-configuration/">SMTP Configuration</a>
  </li>
</ul>

<hr>

<div class="nav-section">Developer Guide</div>
<ul>
  <li class="">
    <a href="../development-setup/">Development Setup</a>
  </li>
  <li class="">
    <a href="../deployment/">Deploying From Git</a>
  </li>
</ul>

      </nav>
      <div class="col-md-9">
        <h1 id="getting-started">Getting Started</h1>

<h3 id="login-to-the-web-admin">Login to the web admin</h3>

<p>A web admin is available to perform basic tasks:</p>

<p><code>https://your-api-umbrella-host/admin/</code></p>

<p>During the <a href="../../download/">install</a>, you should have defined the <code>web.admin.initial_superusers</code> setting in the <code>/etc/api-umbrella/api-umbrella.yml</code> config file. You should now be able to login to to the admin using an account tied to the e-mail address you defined (<a href="https://login.persona.org/about">Mozilla Persona</a> is the only option that will work without additional configuration, but it's has a quick signup if you don't already have an account).</p>

<h3 id="add-api-backends">Add API Backends</h3>

<p>Out of the box, API Umbrella doesn't know about any APIs. You must first configure the API backends that will be proxied to.</p>

<p>In this example, we'll proxy to Google's Geocoding API (but you'll more likely be proxying to your own web services).</p>

<p><strong>Step 1:</strong> Login to the <a href="http://your-api-umbrella-host/admin/">web admin</a> and navigate to the "API Backends" section under the "Configuration" menu.</p>

<p><strong>Step 2:</strong> Add a new backend:</p>

<p><a class="image-link-no2x" href="../../images/docs/add_api_backend_example-af3ba028.png"><img alt="Add API Backend Example" class="img-responsive" src="../../images/docs/add_api_backend_example-af3ba028.png" /></a></p>

<p><strong>Step 3:</strong> Navigate to the "Publish Changes" page under the "Configuration" menu and press the Publish button.</p>

<p>Google's API should now be available through the API Umbrella proxy.</p>

<h3 id="signup-for-an-api-key">Signup for an API key</h3>

<p>On your local environment, visit the signup form:</p>

<p><code>https://your-api-umbrella-host/signup/</code></p>

<p>Signup to receive your own unique API key for your development environment.</p>

<h3 id="make-an-api-request">Make an API request</h3>

<p>Assuming you added the Google Geocoding example as an API backend, you should now be able to make a request to Google's Geocoding API proxied through your local API Umbrella instance:</p>

<p><code>http://your-api-umbrella-host/google/maps/api/geocode/json?address=Golden,+CO&amp;sensor=false&amp;api_key=**YOUR_KEY_HERE**</code></p>

<p>You can see how API Umbrella layers its authentication on top of existing APIs by making a request using an invalid key:</p>

<p><code>http://your-api-umbrella-host/google/maps/api/geocode/json?address=Golden,+CO&amp;sensor=false&amp;api_key=INVALID_KEY</code></p>

<h3 id="view-analytics">View Analytics</h3>

<p>Login to the <a href="http://your-api-umbrella-host/admin/">web admin</a>. Navigate to the "Filter Logs" section under the "Analytics" menu. As you make API requests against your API Umbrella server, the requests should start to show up here (there may be a 30 second delay before the requests show up in the analytics).</p>

<p><a class="image-link-no2x" href="../../images/docs/analytics-01fbd990.png"><img alt="Analytics" class="img-responsive" src="../../images/docs/analytics-01fbd990.png" /></a></p>

<h3 id="roles">Roles</h3>
<p>Roles are created by simply using a new role's name on either the API backend or API key side of things. It behaves like a tagging interface, so there's no explicit action needed to create a new role.</p>

<p>For global settings, when you define an API backend's configuration (eg, that api.data.gov/foo/ gets routed to wherever your server lives), you can assign a required role for accessing that entire API backend. This would mean that all requests to /foo/ would need to have an API key with this specific role assigned to it before it's able to access those APIs.</p>

<h3 id="fine-grained-access-control">Fine-Grained Access Control</h3>
<p>You can also setup more granular rules under the "Sub-URL Request Settings." In there you can define required roles for more specific URLs within your API, allowing you to do things like define that /foo/bar/ and /foo/moo/ require separate roles. You can also assign these requires roles based on HTTP method access, so you can setup different required roles for POST vs GET vs PUT vs DELETE vs etc.</p>

<p>The most common thing we've done is to allow all API keys to have GET access by default, but then setup a sub-url request setting to restrict POST/PUT/DELETE access to specific roles. So, for example, everyone can access the GET API without any role, but only API keys with a "foo-write" role assigned to them can POST to the API.</p>

      </div>
    </div>
  </div>


    <div style="text-align: center; font-style: italic; padding: 2em 0.5em;">
      <a href="https://github.com/NREL/api-umbrella/blob/master/website/docs/getting-started.md.erb">Help Improve this Content</a>
    </div>
  </body>
</html>
