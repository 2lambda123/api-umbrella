<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Customizing public website content - Documentation - API Umbrella</title>
    <link href="../../stylesheets/all-92746e79.css" rel="stylesheet" type="text/css" />
    <script src="../../javascripts/all-992d4073.js" type="text/javascript"></script>
    <link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Raleway:400,300,700" rel="stylesheet" type="text/css">

    <link rel="canonical" href="http://apiumbrella.io/docs/admin-customize-public-website/" />
    <script>
      if(window.location.href.indexOf('nrel.github.io') !== -1) {
        window.location.href = 'http://apiumbrella.io/docs/admin-customize-public-website/';
      }
    </script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-42866857-2', 'nrel.github.io');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
  <body class="docs docs_admin-customize-public-website docs_admin-customize-public-website_index">
    <div id="navigation" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#"><i class="fa fa-umbrella"></i> <b>API Umbrella</b></a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class=""><a href="../../">Home</a></li>
            <li class=""><a href="../../download/">Download</a></li>
            <li class="active"><a href="../architecture/">Documentation</a></li>
          </ul>
        </div>
      </div>
    </div>

      <header>
        <div class="container">
          <h1>Documentation</h1>
        </div>
      </header>

      <div class="container">
    <div class="row">
      <nav class="col-md-3">
        <ul>
  <li class="">
    <a href="../architecture/">Architecture</a>
  </li>
  <li class="">
    <a href="../getting-started/">Getting Started</a>
  </li>
  <li class="">
    <a href="../api-keys/">API Keys</a>
  </li>
  <li class="">
    <a href="../backend-headers/">Backend HTTP Headers</a>
  </li>
  <li class="">
    <a href="../caching/">Caching</a>
  </li>
  <li class="">
    <a href="../smtp-configuration/">SMTP Configuration</a>
  </li>
</ul>

<hr>

<div class="nav-section">Programmers' Guide</div>
<ul>
  <li class="">
    <a href="../development-setup/">Development Setup</a>
  </li>
  <li class="">
    <a href="../deployment/">Deploying From Git</a>
  </li>
</ul>

      </nav>
      <div class="col-md-9">
        <h1 id="public-website-content">Public website content</h1>
<p>The public website content comes from the <a href="https://github.com/NREL/api-umbrella-static-site">api-umbrella-static-site</a> repo. In the development setup this will be checked out in the <em>workspace/static-site</em> directory.</p>

<h2 id="static-site-generator">Static site generator</h2>
<p>API Umbrella uses <a href="http://middlemanapp.com/">middleman</a> as a static site generator. The general idea is that you can host the site on <a href="https://pages.github.com">GitHub Pages</a>, or any other static HTML hosting location (S3 bucket, etc). The website content is inside the <em>source</em> directory, and <a href="http://middlemanapp.com/basics/templates/">Middleman's docs</a> go into more detail about how the layouts and templates work.</p>

<h2 id="static-site-proxy">Static site proxy</h2>
<p>If you'd like to use something besides Middleman for your website content, you would modify the <strong>static_site</strong> configuration inside <em>/etc/api-umbrella/api-umbrella.yml</em> to point to the <strong>host</strong> and <strong>port</strong> of your public website. <br />
For example, let's say you wanted to use WordPress and it was running on the same server on port 8080, you could proxy to that like:</p>

<pre class="highlight yaml"><code><span class="s">static_site</span><span class="pi">:</span>
  <span class="s">host</span><span class="pi">:</span> <span class="s">127.0.0.1</span>
  <span class="s">port</span><span class="pi">:</span> <span class="s">8080</span>
</code></pre>

<p>This same proxying configuration would also be used if you wanted to host things on Github pages.</p>

<h1 id="common-hurdles">Common hurdles</h1>
<p>The one major caveat with either approach (using Middleman or some other CMS of your choosing), is that you'll currently face some hurdles in customizing the site if you want to introduce new webpage content. </p>

<h2 id="hardcoded-url-prefixes">Hardcoded url prefixes</h2>
<p>One of the first things the stack does when accepting an incoming request is determine where to send the request (is the request for an API, or for the admin tool, or for the website?). Right now, we have a hard-coded list of URL prefixes that we route to this public website content. This consists of paths like the home page or /docs* (you can see the <a href="https://github.com/NREL/api-umbrella-router/blob/6b15ceb05584fee2001cabdf6f8b7f1120ebaa59/templates/etc/nginx/router.conf.hbs#L150">full list</a>). This hard-coded list becomes problematic, if you want to add new website content at a new URL paths. We are working to <a href="https://github.com/18F/api.data.gov/issues/146">improve URL routing of webpage content</a>.</p>

<p>In the meantime, there's a couple quick and dirty options:</p>

<ul>
  <li>Edit this line in <a href="https://github.com/NREL/api-umbrella-router/blob/6b15ceb05584fee2001cabdf6f8b7f1120ebaa59/templates/etc/nginx/router.conf.hbs#L150">templates/etc/nginx/router.conf.hbs</a> to adjust path prefixes you're matching (this will work fine, but just be careful if you're doing this and using the binary package installers, since your changes will likely be wiped out the next time you upgrade the api-umbrella package).</li>
  <li>Stick new content under subdirectories of the paths we're already routing. So for example, if you want to add a terms &amp; conditions page, try putting that content under <em>/signup/terms</em> (since we are routing */signup/**).</li>
</ul>

<p>Neither approach is really ideal, but they might allow you start customizing pages in the near-term.</p>

      </div>
    </div>
  </div>


    <div style="text-align: center; font-style: italic; padding: 2em 0.5em;">
      <a href="https://github.com/NREL/api-umbrella/blob/master/website/docs/admin-customize-public-website.md">Help Improve this Content</a>
    </div>
  </body>
</html>
