worker_processes {{nginx.workers}};

daemon off;

pid /tmp/api_umbrella_nginx_router.pid;

events {
  worker_connections 1024;
}

error_log stderr;

http {
  error_log stderr;
  access_log off;

  server {
    listen 31000;
    server_name api.vagrant localhost;

    # Write the real client IP when it's passed via X-Forwarded-For from HAProxy.
    set_real_ip_from 127.0.0.1;
    real_ip_header X-Forwarded-For;

    root /vagrant/workspace/web/public;

    # Serve this rails site with Passenger.
    passenger_enabled on;

    # Set the current environment.
    rails_env development;

    # Allow for larger request bodies to allow for huge documentation pages.
    client_max_body_size 10m;
  }
}
