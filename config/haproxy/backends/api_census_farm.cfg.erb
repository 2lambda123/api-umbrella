backend api_census_farm
  # Strip /census from the beginning of the request URL before the receiving
  # backend application sees the request.
  #
  # Turns a request from "GET /census/something" to "GET /something"
  reqirep ^([^\ :]*)\ /census/american-community-survey/v1/([0-9]{4})/populations/states/([A-Z]{2}).*(\ .*) \1\ /data/\2/acs5?key=e81ad00727f0e08a8fd615d9db0e2d148ff44f77&get=B02001_001E,NAME&for=state:\3\4
  reqirep ^([^\ :]*)\ /census/american-community-survey/v1/([0-9]{4})/populations/states.*(\ .*) \1\ /data/\2/acs5?key=e81ad00727f0e08a8fd615d9db0e2d148ff44f77&get=B02001_001E,NAME&for=state:*\3
  reqirep ^([^\ :]*)\ (.*for=state:)AL(.*) \1\ \201\3
  reqirep ^([^\ :]*)\ (.*for=state:)AK(.*) \1\ \202\3
  reqirep ^([^\ :]*)\ (.*for=state:)AZ(.*) \1\ \204\3
  reqirep ^([^\ :]*)\ (.*for=state:)AR(.*) \1\ \205\3
  reqirep ^([^\ :]*)\ (.*for=state:)CA(.*) \1\ \206\3
  reqirep ^([^\ :]*)\ (.*for=state:)CO(.*) \1\ \208\3
  reqirep ^([^\ :]*)\ (.*for=state:)CT(.*) \1\ \209\3
  reqirep ^([^\ :]*)\ (.*for=state:)DE(.*) \1\ \210\3
  reqirep ^([^\ :]*)\ (.*for=state:)DC(.*) \1\ \211\3
  reqirep ^([^\ :]*)\ (.*for=state:)FL(.*) \1\ \212\3
  reqirep ^([^\ :]*)\ (.*for=state:)GA(.*) \1\ \213\3
  reqirep ^([^\ :]*)\ (.*for=state:)HI(.*) \1\ \215\3
  reqirep ^([^\ :]*)\ (.*for=state:)ID(.*) \1\ \216\3
  reqirep ^([^\ :]*)\ (.*for=state:)IL(.*) \1\ \217\3
  reqirep ^([^\ :]*)\ (.*for=state:)IN(.*) \1\ \218\3
  reqirep ^([^\ :]*)\ (.*for=state:)IA(.*) \1\ \219\3
  reqirep ^([^\ :]*)\ (.*for=state:)KS(.*) \1\ \220\3
  reqirep ^([^\ :]*)\ (.*for=state:)KY(.*) \1\ \221\3
  reqirep ^([^\ :]*)\ (.*for=state:)LA(.*) \1\ \222\3
  reqirep ^([^\ :]*)\ (.*for=state:)ME(.*) \1\ \223\3
  reqirep ^([^\ :]*)\ (.*for=state:)MD(.*) \1\ \224\3
  reqirep ^([^\ :]*)\ (.*for=state:)MA(.*) \1\ \225\3
  reqirep ^([^\ :]*)\ (.*for=state:)MI(.*) \1\ \226\3
  reqirep ^([^\ :]*)\ (.*for=state:)MN(.*) \1\ \227\3
  reqirep ^([^\ :]*)\ (.*for=state:)MS(.*) \1\ \228\3
  reqirep ^([^\ :]*)\ (.*for=state:)MO(.*) \1\ \229\3
  reqirep ^([^\ :]*)\ (.*for=state:)MT(.*) \1\ \230\3
  reqirep ^([^\ :]*)\ (.*for=state:)NE(.*) \1\ \231\3
  reqirep ^([^\ :]*)\ (.*for=state:)NV(.*) \1\ \232\3
  reqirep ^([^\ :]*)\ (.*for=state:)NH(.*) \1\ \233\3
  reqirep ^([^\ :]*)\ (.*for=state:)NJ(.*) \1\ \234\3
  reqirep ^([^\ :]*)\ (.*for=state:)NM(.*) \1\ \235\3
  reqirep ^([^\ :]*)\ (.*for=state:)NY(.*) \1\ \236\3
  reqirep ^([^\ :]*)\ (.*for=state:)NC(.*) \1\ \237\3
  reqirep ^([^\ :]*)\ (.*for=state:)ND(.*) \1\ \238\3
  reqirep ^([^\ :]*)\ (.*for=state:)OH(.*) \1\ \239\3
  reqirep ^([^\ :]*)\ (.*for=state:)OK(.*) \1\ \240\3
  reqirep ^([^\ :]*)\ (.*for=state:)OR(.*) \1\ \241\3
  reqirep ^([^\ :]*)\ (.*for=state:)PA(.*) \1\ \242\3
  reqirep ^([^\ :]*)\ (.*for=state:)RI(.*) \1\ \244\3
  reqirep ^([^\ :]*)\ (.*for=state:)SC(.*) \1\ \245\3
  reqirep ^([^\ :]*)\ (.*for=state:)SD(.*) \1\ \246\3
  reqirep ^([^\ :]*)\ (.*for=state:)TN(.*) \1\ \247\3
  reqirep ^([^\ :]*)\ (.*for=state:)TX(.*) \1\ \248\3
  reqirep ^([^\ :]*)\ (.*for=state:)UT(.*) \1\ \249\3
  reqirep ^([^\ :]*)\ (.*for=state:)VT(.*) \1\ \250\3
  reqirep ^([^\ :]*)\ (.*for=state:)VA(.*) \1\ \251\3
  reqirep ^([^\ :]*)\ (.*for=state:)WA(.*) \1\ \253\3
  reqirep ^([^\ :]*)\ (.*for=state:)WV(.*) \1\ \254\3
  reqirep ^([^\ :]*)\ (.*for=state:)WI(.*) \1\ \255\3
  reqirep ^([^\ :]*)\ (.*for=state:)WY(.*) \1\ \256\3

  # Modify the host.
  reqirep ^Host: Host:\ api.census.gov

  balance roundrobin
  server api_census1 api.census.gov:80
