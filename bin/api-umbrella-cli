#!/usr/bin/env luajit

local src_root = os.getenv("API_UMBRELLA_SRC_ROOT")
if src_root then
  package.path = src_root .. "/src/?.lua;" ..
    src_root .. "/vendor/share/lua/5.1/?.lua;" ..
    src_root .. "/vendor/share/lua/5.1/?/init.lua;" ..
    package.path
  package.cpath = src_root .. "/vendor/lib/lua/5.1/?.so;" ..
    package.cpath
end

local cli = require "api-umbrella.cli"

local command = arg[1]
if cli[command] then
  cli[command]()
else
  print("Unknown command: " .. tostring(command) .. "\n\n")
  cli.help()
end
